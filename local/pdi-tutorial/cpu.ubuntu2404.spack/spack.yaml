# This is a Spack Environment file.
#
# It describes a set of packages to be installed, along with
# configuration settings.
spack:
  concretizer:
    unify: true
  # add package specs to the `specs` list
  specs:
  - cmake
  - kokkos
  - python@3.13 +tkinter
  - pdi~fortran
  - pdiplugin-decl-hdf5
  - pdiplugin-mpi
  - pdiplugin-pycall
  - pdiplugin-trace
  - pdiplugin-user-code
  - pdiplugin-set-value
  - tbouvier.patches.py-ray
  - py-deisa ^py-dask ~dataframe
  - py-pandas ~performance
  - py-distributed
  - py-bokeh
  - py-matplotlib
  - py-mpi4py
  - py-pip
  - py-pytest
  - git
  - gdb
  - vim
  - nano
  config:
    template_dirs:
    - templates
  container:
    # docker | singularity
    format: docker
    images:
      build: docker.io/spack/ubuntu-noble:nightly
      final: docker.io/gcc:15
    template: container/CustomDockerfile
    strip: true
  mirrors:
    numpex-spack-mirror:
      url: oci://ghcr.io/thomas-bouvier/numpex-spack-mirror
      access_pair:
        id_variable: OCI_USERNAME_VARIABLE
        secret_variable: OCI_PASSWORD_VARIABLE
